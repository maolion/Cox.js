<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>Untitled</title>
    <link rel="stylesheet" href="http://192.168.1.134/ec/libs/Cox/css/build/Cox.css" />
    <link rel="stylesheet" href="http://192.168.1.134/ec/libs/Cox/css/build/UI.css" />
    <link rel="stylesheet" href="http://192.168.1.134/ec/libs/Cox/css/build/theme.css" />
    <script src="../debug/Cox.js" cox-path="../; Cox=../modules"></script>
    <style>
        body{
            padding: 20px;
        }
        div.row{
            padding: 5px;
        }
        div.row input{
            vertical-align: middle;
            width: 200px;
        }
        div.row .tip{
            display: inline-block;
            margin-left: 10px;
            vertical-align: middle;
        }
    </style>
    <script>
        Use(["~/Cox/Extends/jQuery", "~/Cox/UI/Form/Validation"], function(require)
        {
            var 
                jQuery       = require("jQuery"),
                Validation = require("Validation")
            ;
            x = new Validation(jQuery('input'));
            x.on("next", function(input)
            {
                console.log("next:", input);
            });

            x.on("pass", function(ok, obj)
            {
                var input = jQuery(obj.input);

                if (obj.value === "" && ok) {
                    input.removeClass('success');
                    input.removeClass("error");
                    input.next("span.tip").html("");
                    return;
                }
                if (!ok) {
                    input.removeClass("success");
                    input.addClass("error");
                } else {
                    input.removeClass("error");
                    input.addClass("success");
                }
                input.next("span.tip").html(obj.msg || "验证通过");

            });
            x.on("done", function()
            {
                console.log("done");
            });
            jQuery("input").on("blur", function()
            {
                x.check(this.name);
            });
            jQuery("#test-btn").on("click", function()
            {
                x.check();
            });
        });
    </script>

</head>
<body>
    <div class="example">
        <div class="row">
            <h5>input[test=decimal]</h5>
            <input class="input-text" value="1" name="decimal0" type="text" test="decimal" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=decimal(2)]</h5>
            <input class="input-text" value="123.00" name="decimal1" type="text" test="decimal(2)" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=decimal(0, 10, 2)]</h5>
            <input class="input-text" value=".23" name="decimal2" type="text" test="decimal(0, 100, 2)" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=and(must,decimal(0, 10, 2))]</h5>
            <input class="input-text" value=".23" name="decimal3" type="text" test="and(must,decimal(0, 100, 2))" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=userName]</h5>
            <input class="input-text" value="abc" name="t1" type="text" test="userName" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=and(userName, len(6, 20))]</h5>
            <input class="input-text" value="abc123456" name="t2" type="text" test="and(userName, len(6, 20))" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=int]</h5>
            <input class="input-text" value="123" name="int1" type="text" test="int" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=int(5, 100)]</h5>
            <input class="input-text" value="55" name="int2" type="text" test="int(5, 100)" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=reg(/^(?:\d+|\d*(?:\.{0,1}\d+))$/)]</h5>
            <input class="input-text" value="55" name="reg1" type="text" test="reg(/^(?:\d+|\d*(?:\.{0,1}\d+))$/)" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=reg('^Hello,\\w+$', 'i')]</h5>
            <input class="input-text" value="HElLo,maolion" name="reg2" type="text" test="reg('^Hello,\\w+$', 'i')" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=url]</h5>
            <input class="input-text" value="http://maolion.com" name="url1" type="text" test="url" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=uri]</h5>
            <input class="input-text" value="../abc/./p.aw/?abc=10&b=20" name="uri1" type="text" test="uri" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=tel]</h5>
            <input class="input-text" value="0598-7722540-234" name="tel1" type="text" test="tel" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=mobile]</h5>
            <input class="input-text" value="18650963830" name="mobile1" type="text" test="mobile" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=email]</h5>
            <input class="input-text" value="maolion.j@gmail.com" name="email1" type="text" test="email" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=date]</h5>
            <input class="input-text" value="2014/3/26" name="date1" type="text" test="date" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=date("2013/12/31", "2014/12/31")]</h5>
            <input class="input-text" value="2014/3/26" name="date2" type="text" test="date('2013/12/31', '2014/12/31')" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=time]</h5>
            <input class="input-text" value="18:30:00" name="time1" type="text" test="time" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=time("12:00:00", "18:30:00")]</h5>
            <input class="input-text" value="18:30:00" name="time2" type="text" test="time('12:00:00', '18:30:00')" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=dateTime]</h5>
            <input class="input-text" value="2014/3/26 18:30:00" name="dateTime1" type="text" test="dateTime" /><span class="tip"></span>
        </div>
        <div class="row">
            <h5>input[test=dateTime('2014/3/26 8:30:00', '2014/3/26 18:30:00')]</h5>
            <input class="input-text" value="2014/3/26 18:30:00" name="dateTime2" type="text" test="dateTime('2014/3/26 8:30:00', '2014/3/26 18:30:00')" /><span class="tip"></span>
        </div>
        <div class="row"><button class="button blue" id="test-btn">测试</button></div>
    </div>
</body>
</html>
